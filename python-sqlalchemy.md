### SQLAlchemy ORM

Здесь представлен и полностью описан Объектный Реляционный Сопоставитель (Object Relational Mapper, ORM). Если Вы хотите работать с более высокоуровневым SQL (который в случае использования ORM формируется автоматически, также как автоматизированно сохраняются объекты Python), начните с Руководсва.

#### Проверка версии
Можно быстро проверить, используем ли мы последнюю версию SQLAlchemy (на апрель 2013 года это 0.8.0):

    >>> import sqlalchemy
    >>> sqlalchemy.__version__ 
    0.8.0
  
#### Соединение с БД
В данном руководстве мы будем испоьлзовать базу данных SQLite, размещённую полностью в оперативной памяти. Для соединения с ней мы используем `create_engine()`:

    >>> from sqlalchemy import create_engine
    >>> engine = create_engine('sqlite:///:memory:', echo=True)

Флаг `echo` это включение журнала регистрации действий SQLAlchemy, который работает через стандартный модуль Python `logging`. Когда он включен, мы увидим все сгенерированные команды SQL. Если Вы, работая с данным Руководством, хотите генерировать не так много выходной информации, присвойте этому параметру `False`.

Для соединения с БД MySQL используйте следующую конструкцию:

    engine = create_engine(
                "mysql://scott:tiger@localhost/test",
                pool_recycle=3600
            )

Опция `pool_recycle` контролирует время жизни соединения.

Возвращаемое процедурой `create_engine()` значение это экземпляр движка ("Engine"), который представляет ядро интерфейса к БД, адаптированное к диалекту, работающему с деталями взаимодействия с БД и API. Под диалектом подразумевается SQLite, MySQL и т. д., которые будут интерпретировать инструкции к встроенным модулям Python типа sqlite3.

Движок в действительности пока не пытался соединиться к БД; впервые это происходит лишь тогда, когда будет запрошено выполнение действия с БД. Мы можем проиллюстрировать это, запросив выполнение простого оператора `SELECT`:

  sql>>> engine.execute("select 1").scalar()
  1

Соединение с БД будет установлено лишь в момент вызова метода `Engine.execute()`, который используется для исполнения SQL-запроса. Далее соединение будет возвращено во внутренний пул соединений, где он будет находиться для дальнейшего использования при выполнеиии последующих операторов. Подобное прямое использование движка нетепично в рамках ORM, так как он обычно используется неявно, "за кулисами", что мы вскоре и увидим.